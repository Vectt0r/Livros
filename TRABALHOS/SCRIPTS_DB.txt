-- Tabela Veiculo
CREATE TABLE Veiculo (
    Placa VARCHAR2(8) PRIMARY KEY,
    Nome VARCHAR2(100),
    Modelo VARCHAR2(100),
    Ano NUMBER,
    Fabricante VARCHAR2(100),
    NumPassageiros NUMBER,
    CapPortaMalas NUMBER,
    ValorDia NUMBER(10, 2),
    ValorSemana NUMBER(10, 2),
    ValorMes NUMBER(10, 2)
);

-- Tabela Cliente
CREATE TABLE Cliente (
    CPF VARCHAR2(11) PRIMARY KEY,
    Nome VARCHAR2(100),
    CategoriaCNH CHAR(1),
    DataNasc DATE,
    Endereco VARCHAR2(255)
);

-- Tabela Locacao
CREATE TABLE Locacao (
    IDLocacao NUMBER PRIMARY KEY,
    PlacaVeiculo VARCHAR2(8) NOT NULL,
    CPFCliente VARCHAR2(11) NOT NULL,
    DataInicio DATE,
    DataFim DATE,
    ValorPago NUMBER(10, 2),
    FOREIGN KEY (PlacaVeiculo) REFERENCES Veiculo(Placa),
    FOREIGN KEY (CPFCliente) REFERENCES Cliente(CPF)
);

-- Tabela Manutencao
CREATE TABLE Manutencao (
    IDManutencao NUMBER PRIMARY KEY,
    PlacaVeiculo VARCHAR2(8) NOT NULL,
    DataInicio DATE,
    DataFim DATE,
    Custo NUMBER(10, 2),
    Descricao CLOB,
    FOREIGN KEY (PlacaVeiculo) REFERENCES Veiculo(Placa)
);


CREATE SEQUENCE seq_locacao START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE seq_manutencao START WITH 1 INCREMENT BY 1;


CREATE OR REPLACE TRIGGER trg_locacao_id
BEFORE INSERT ON Locacao
FOR EACH ROW
BEGIN
  SELECT seq_locacao.NEXTVAL INTO :new.IDLocacao FROM dual;
END;
/

CREATE OR REPLACE TRIGGER trg_manutencao_id
BEFORE INSERT ON Manutencao
FOR EACH ROW
BEGIN
  SELECT seq_manutencao.NEXTVAL INTO :new.IDManutencao FROM dual;
END;
/


-- Inserção na tabela Veiculo
INSERT INTO Veiculo (Placa, Nome, Modelo, Ano, Fabricante, NumPassageiros, CapPortaMalas, ValorDia, ValorSemana, ValorMes) VALUES ('ABC1234', 'Fusca', 'Sedan', 1980, 'Volkswagen', 5, 300, 100.00, 600.00, 2000.00);
-- Repita para os outros registros...

-- Inserção na tabela Cliente
INSERT INTO Cliente (CPF, Nome, CategoriaCNH, DataNasc, Endereco) VALUES ('12345678901', 'João Silva', 'B', TO_DATE('1985-02-15', 'YYYY-MM-DD'), 'Rua A, 123, Cidade X');
-- Repita para os outros registros...

-- Inserção na tabela Locacao (IDLocacao será preenchido automaticamente pela trigger)
INSERT INTO Locacao (PlacaVeiculo, CPFCliente, DataInicio, DataFim, ValorPago) VALUES ('ABC1234', '12345678901', TO_DATE('2023-04-01', 'YYYY-MM-DD'), TO_DATE('2023-04-03', 'YYYY-MM-DD'), 300.00);
-- Repita para os outros registros...

-- Inserção na tabela Manutencao (IDManutencao será preenchido automaticamente pela trigger)
INSERT INTO Manutencao (PlacaVeiculo, DataInicio, DataFim, Custo, Descricao) VALUES ('ABC1234', TO_DATE('2023-03-01', 'YYYY-MM-DD'), TO_DATE('2023-03-03', 'YYYY-MM-DD'), 500.00, 'Revisão Completa');
-- Repita para os outros registros...



